<div class="project-section-header" data-ng-include="'partials/project/blocks/project-menu.html'"></div>

<div class="project-section-content">
    <div class="project-section-description-column"
         data-ng-include="'partials/project/blocks/project-title-edit.html'"></div>

    <div class="project-section-content-column">
        <p class="project-section-content-header">Mission details</p>

        <div class="project-section-content-description-block"
             data-ng-repeat="block in projectData.project.description.blocks">

            <div data-ng-if="!form.isOpen('block:' + $index)">
                <p class="project-section-content-description-block-title">{{block.title}}</p>

                <div class="project-section-content-description-block-content"
                     data-ng-bind-html="block.content"></div>

                <div data-ng-if="!form.isOpen()" class="btn-group">
                    <button type="button" class="btn btn-default" data-ng-click="form.open('block:' + $index)">
                        Edit
                    </button>
                    <button type="button" class="btn btn-default" data-ng-disabled="$last"
                            data-ng-click="moveMetadataBlock($index, false)">
                        Move down
                    </button>
                    <button type="button" class="btn btn-default" data-ng-disabled="$index < 1"
                            data-ng-click="moveMetadataBlock($index, true)">
                        Move up
                    </button>
                    <button type="button" class="btn btn-default" data-ng-click="deleteMetadataBlock($index)">
                        Delete
                    </button>
                </div>
            </div>

            <div data-ng-if="form.isOpen('block:' + $index)">
                <form role="form">
                    <div class="form-group">
                        <label for="block-block-title">Title:</label>
                        <input id="block-block-title" class="form-control" type="text" placeholder="Title"
                               data-ng-model="form.values.description.blocks[$index].title"/>
                    </div>
                    <div class="form-group">
                        <label>Text:</label>
                        <text-angular
                                name="project-block-content"
                                data-ng-model="form.values.description.blocks[$index].content">
                        </text-angular>
                    </div>
                    <div class="btn-group">
                        <button type="button" class="btn btn-default" data-ng-click="form.save()">Save</button>
                        <button type="button" class="btn btn-default" data-ng-click="form.cancel()">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

        <p class="project-section-content-column-add-block" data-ng-if="!form.isOpen()">
            <button type="button" class="btn btn-default" data-ng-click="addMetadataBlock()">Add block</button>
        </p>
    </div>
</div>

