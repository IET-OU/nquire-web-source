
<div ng-controller="AdminFiltersCtrl" class="admin-page-filters">

<form name="editForm">

  <table class="table table-striped">
      <thead>
      <tr>
          <th class="key" translate>Label</th>
          <th class="value" translate>Tag-term</th>
          <th class="col-btn"></th>
      </tr>
      </thead>
      <tbody>
      <tr class="XX-WAS-row-add-form"> </tr>
      <tr data-ng-repeat="item in tags.data.filters" data-X-ng-init="idx = item._idx" data-ng-controller="AdminFiltersCtrl">
          <td title="ID: {{item.id}} &#13;Date: {{item.isoDate}}">
              <div data-ng-if="!form.isOpen()" data-ng-bind-html="item.label"></div>
              <div data-ng-if="form.isOpen()">
                  <input class="form-control" name="label" data-ng-model="form.values.label" data-ng-required="1"
                         placeholder="Label, eg. Greek Schools missions" />

                  <p role="alert" ng-if="editForm.label.$error.required" translate>The label is required.</p>
              </div>
          </td>
          <td>
              <div data-ng-if="!form.isOpen()" data-ng-bind="item.query"></div>
              <div data-ng-if="form.isOpen()">
                  <input class="form-control" name="tag" data-ng-model="form.values.query"
                         placeholder="{{'Tag-term, eg. greek-schools (no accents)' | translate}}"
                         title="{{'Tag-term format: letters, numbers, dashes, no spaces, no accents.' | translate}}"
                         data-ng-required="1" data-ng-pattern="tags.pattern()" pattern="[a-z0-9\-]+" maxlength="32"
                         translate-comment="Note that the term, eg. greek-schools should not be translated."/>
                  <div role="alert">
                    <div ng-switch="tags.formError('edit')">
                      <p ng-switch-when="duplicate-tag"><span translate>Sorry! I can't add a duplicate tag:</span> <tt>{{form.values.query}}</tt></p>
                      <p ng-switch-when="invalid-tag" translate>Sorry! The tag term is not valid — no spaces or accents allowed.</p>
                      <p ng-switch-when="empty-tag" translate>Sorry! This tag term is empty.</p>
                    </div>
                    <p ng-if="(editForm.tag.$invalid || editForm.tag.$error.required)"
                        translate>The tag term is not valid — no spaces or accents allowed.</p>
                  </div>
              </div>
          </td>
          <td>
              <div class="btn-group" data-ng-if="!form.isOpen()">
                  <button class="btn btn-default btn-sm" ng-click="form.open()" translate>Edit</button>
                  <button class="btn btn-default btn-sm" ng-click="deleteFilter(item.id, item.query)"
                      data-confirm="{{'Are you sure you want to delete the <i>%s</i> tag?' | translate}}"
                      data-confirm_title="{{'Delete tag?' | translate}}" translate>Delete</button>
              </div>
              <div class="btn-group" data-ng-if="form.isOpen()">
                  <button class="btn btn-default btn-sm" ng-click="form.save()" type="submit" ng-disabled="editForm.$invalid" translate>Save</button>
                  <button class="btn btn-default btn-sm" ng-click="form.cancel()" translate>Cancel</button>
              </div>
          </td>
      </tr>
      </tbody>
  </table>
</form>


<div class="row-add-form">
<form name="addForm" ng-submit="submit()">
  <table><tr>
  <td class="key"><input name="label" class="form-control" data-ng-model="new_filter.label"
      placeholder="Label, eg. Greek Schools missions" title="Label, eg. Greek Schools missions"
      data-ng-required="1"/>
    <p ng-if="addForm.label.$error.required && addForm.tag.$dirty" translate>The label is required.</p>
  </td>
  <td class="value"><input class="form-control" name="tag" data-ng-model="new_filter.query"
      placeholder="{{'Tag-term, eg. greek-schools (no accents)' | translate }}"
      title="{{'Tag-term format: letters, numbers, dashes, no spaces, no accents.' | translate}}"
      data-ng-required="1" data-ng-pattern="tags.pattern()" pattern="[a-z0-9\-]+" maxlength="32"/>

    <div role="alert">
      <div ng-switch="tags.formError('add')">
        <p ng-switch-when="duplicate-tag"><span translate>Sorry! I can't add a duplicate tag:</span> <tt>{{new_filter.query}}</tt></p>
        <p ng-switch-when="invalid-tag" translate>Sorry! The tag term is not valid — no spaces or accents allowed.</p>
        <p ng-switch-when="empty-tag" translate>Sorry! This tag term is empty.</p>
        <!--<p ng-switch-default translate>Sorry! Unknown error.</p>-->
      </div>
      <p ng-if="(addForm.tag.$invalid || addForm.tag.$error.required) && addForm.tag.$dirty"
        translate>The tag term is not valid — no spaces or accents allowed.</p>
    </div>
  </td>
  <td class="col-btn"><button class="btn btn-default" type="submit" ng-disabled="addForm.$invalid" translate>Add</button></td>
  </tr></table>
</form>
</div>


</div>
