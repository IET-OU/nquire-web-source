<!DOCTYPE html>


<div class="comment-list" data-ng-controller="CommentsCtrl">
    <div class="comment-list-header">Comments</div>

    <div class="comment" data-ng-repeat="comment in comments.list">

        <div class="comment-metadata">
            <span class="comment-author-image" data-siw-user-image data-user="comment.user"></span>

            <div class="comment-metadata-text">
                <div>
                    <div class="comment-date">{{comment.date | fuzzyDate}}</div>
                    <div class="comment-author">{{comment.user.username}} said:
                    </div>
                </div>
            </div>
        </div>
        <div class="comment-content">{{comment.comment}}</div>
        <div class="comment-controls btn-group">
            <button type="button" class="btn btn-default btn-xs" data-ng-click="posting.open()">Reply</button>
            <button type="button" class="btn btn-default btn-xs" data-ng-click="posting.deleteComment(comment.id)"
                    data-ng-if="canDelete(comment.id)">Delete
            </button>
        </div>
    </div>

    <div data-ng-if="!posting.isOpen">
        <button type="button" class="btn btn-default btn-sm" data-ng-click="posting.open()">New comment</button>
    </div>
    <div data-ng-if="posting.isOpen">
        <form role="form">
            <div class="form-group">
                <label for="comment-text-area">Comment:</label>
                <textarea id="comment-text-area" class="form-control" data-ng-model="posting.comment"></textarea>
            </div>
            <div class="btn-group">
                <button type="button" class="btn btn-default btn-sm" data-ng-click="posting.submit()">Submit</button>
                <button type="button" class="btn btn-default btn-sm" data-ng-click="posting.cancel()">Cancel</button>
            </div>
        </form>
    </div>
</div>
